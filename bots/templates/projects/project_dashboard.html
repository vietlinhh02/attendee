{% extends 'projects/sidebar.html' %}

{% block content %}
    <div class="container mt-4">
        <div class="card bg-info-subtle text-dark mb-4" style="border: none; background: linear-gradient(135deg, rgba(189, 232, 245, 0.4) 0%, rgba(255, 255, 255, 0.4) 100%); backdrop-filter: blur(20px);">
            <div class="card-body p-4">
                <h5 class="card-title fw-bold mb-3">Hi {{ request.user.email }}! üëã</h5>
                <p class="card-text fs-5" style="font-weight: 300;">Welcome to Attendee - the open source meeting bot API. You have 5 hours of free credits to get started.</p>
                <p class="card-text mb-0 mt-3">
                    If you're building something that needs meeting bots, we'd love to chat on our <a href="https://join.slack.com/t/attendee-community/shared_invite/zt-3l43ns8cl-G8YnMccWVTugMlloUtSf9g" class="fw-semibold">Slack</a>. And please ‚≠ê us on <a href="https://github.com/noah-duncan/attendee" target="_blank" rel="noopener noreferrer" class="fw-semibold">Github</a> if you find us useful.

                </p>
            </div>
        </div>
        <div class="card" style="background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(20px);">
            <div class="card-body p-4">
                <h4 class="mt-2 mb-4 fw-bold" style="letter-spacing: -0.02em;">Follow these steps to get started</h4>
                <ol class="list-group list-group-flush">
                    <!-- Step 1: Test the API by creating a bot -->
                    <li class="list-group-item pt-4 pb-4 fs-5 border-bottom">
                        <a href="#step1-content" data-bs-toggle="collapse" role="button" aria-expanded="{% if not quick_start.has_ended_bots %}true{% else %}false{% endif %}" class="text-decoration-none text-dark d-flex justify-content-between align-items-center">
                            <span class="fw-medium">1. Create a bot in the dashboard
                            {% if quick_start.has_ended_bots %}
                            <span class="text-success ms-2"><i class="bi bi-check-circle-fill"></i></span>
                            {% endif %}
                            </span>
                            <i class="bi bi-chevron-down"></i>
                        </a>
                        <div id="step1-content" class="collapse {% if not quick_start.has_ended_bots %}show{% endif %}">
                            <div class="mt-3 ps-4">
                                <a href="{% url 'projects:project-bots' project.object_id %}?open_create_modal=true" class="btn btn-sm btn-primary px-3 py-2">
                                    Create a bot
                                </a>
                            </div>
                        </div>
                    </li>

                    <!-- Step 2: API Key -->
                    <li class="list-group-item pt-4 pb-4 fs-5 border-bottom">
                        <a href="#step2-content" data-bs-toggle="collapse" role="button" aria-expanded="{% if not quick_start.has_api_keys %}true{% else %}false{% endif %}" class="text-decoration-none text-dark d-flex justify-content-between align-items-center">
                            <span class="fw-medium">2. Create an API key
                            {% if quick_start.has_api_keys %}
                            <span class="text-success ms-2"><i class="bi bi-check-circle-fill"></i></span>
                            {% endif %}
                            </span>
                            <i class="bi bi-chevron-down"></i>
                        </a>
                        <div id="step2-content" class="collapse {% if not quick_start.has_api_keys %}show{% endif %}">
                            <div class="mt-3 ps-4">
                                <a href="{% url 'projects:project-api-keys' project.object_id %}" class="btn btn-sm btn-primary px-3 py-2">
                                    Go to API Keys
                                </a>
                            </div>
                        </div>
                    </li>

                    <!-- Step 3: Call API -->
                    <li class="list-group-item pt-4 pb-4 fs-5 border-bottom">
                        <a href="#step3-content" data-bs-toggle="collapse" role="button" aria-expanded="{% if not quick_start.has_created_bots_via_api %}true{% else %}false{% endif %}" class="text-decoration-none text-dark d-flex justify-content-between align-items-center">
                            <span class="fw-medium">3. Call the API
                            {% if quick_start.has_created_bots_via_api %}
                            <span class="text-success ms-2"><i class="bi bi-check-circle-fill"></i></span>
                            {% endif %}
                            </span>
                            <i class="bi bi-chevron-down"></i>
                        </a>
                        <div id="step3-content" class="collapse {% if not quick_start.has_created_bots_via_api %}show{% endif %}">
                            <div class="mt-3 ps-4">
                                <small class="text-muted text-uppercase fw-bold" style="font-size: 0.7rem; letter-spacing: 0.05em;">Create bot</small>
                                <pre class="bg-light p-3 mt-2 mb-3 rounded border" style="background-color: #f8f9fa !important;">
<code class="small" style="font-family: 'SF Mono', Menlo, monospace; color: #333;">curl -X POST \
{{ request.scheme }}://{{ request.get_host }}/api/v1/bots \
-H 'Authorization: Token &lt;YOUR_API_KEY&gt;' \
-H 'Content-Type: application/json' \
-d '{"meeting_url": "https://us05web.zoom.us/j/xxxxxxx?pwd=xxxxxx", "bot_name": "My Bot"}'</code>
                                </pre>
                            </div>
                            <div class="mt-2 ps-4">
                                <small class="text-muted text-uppercase fw-bold" style="font-size: 0.7rem; letter-spacing: 0.05em;">Retrieve transcript</small>
                                <pre class="bg-light p-3 mt-2 mb-3 rounded border" style="background-color: #f8f9fa !important;">
<code class="small" style="font-family: 'SF Mono', Menlo, monospace; color: #333;">curl -X GET \
{{ request.scheme }}://{{ request.get_host }}/api/v1/bots/&lt;BOT_ID&gt/transcript \
-H 'Authorization: Token &lt;YOUR_API_KEY&gt;' \
-H 'Content-Type: application/json'</code>
                                </pre>
                            </div>
                        </div>
                    </li>

                    <!-- Step 4: Credentials -->
                    <li class="list-group-item pt-4 pb-4 fs-5">
                        <a href="#step4-content" data-bs-toggle="collapse" role="button" aria-expanded="{% if not quick_start.has_credentials %}true{% else %}false{% endif %}" class="text-decoration-none text-dark d-flex justify-content-between align-items-center">
                            <span class="fw-medium">4. Add credentials
                            {% if quick_start.has_credentials %}
                            <span class="text-success ms-2"><i class="bi bi-check-circle-fill"></i></span>
                            {% endif %}
                            </span>
                            <i class="bi bi-chevron-down"></i>
                        </a>
                        <div id="step4-content" class="collapse {% if not quick_start.has_credentials %}show{% endif %}">
                            <div class="mt-2">
                                <a href="{% url 'projects:project-credentials' project.object_id %}" class="btn btn-sm btn-primary">
                                    Go to Credentials
                                </a>
                            </div>
                        </div>
                    </li>
                </ol>
            </div>
        </div>
    </div>
{% endblock %}
